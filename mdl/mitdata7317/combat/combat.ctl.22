@ERROR *
@TERM WIDTH 80
@CONNECT COMBAT:
@ACCESS SS:<COMBAT>
@IF (ERROR) @GOTO TOP
TOP::@TYPE PLAN.PLAN.-2
@IF (ERROR) @GOTO SSTOP
@COMBAT:ZONE
@IF (ERROR) @GOTO CMPLST
@RESET ZONE
@CONNECT COMBAT:
@DELETE PLAN.PLAN.-2
@BACKTO TOP
CMPLST::@CONNECT COMBAT:
*<PROG ((OUTCHAN <AND <GASSIGNED? COMPCHAN!-CFC> ,COMPCHAN!-CFC>))
*  <COND (.OUTCHAN
*         <FR&>
=         <CLOSE .OUTCHAN>)>>
@IF (ERROR) @GOTO CMPLS1
=<QUIT>
@IF (ERROR) @GOTO CMPLS1
CMPLS1::
@CLOSE
@IF (ERROR) @GOTO CNTCLS
CNTCLS::
@RESET
@RENAME PLAN.PLAN.-2 PLAN.LOST
@IF (ERROR) @GOTO RNMLSP
@BACKTO TOP
RNMLSP::@DELETE PLAN.PLAN.-2
@EXPUNGE
@BACKTO TOP
SSTOP::@CONNECT SS:<COMBAT>
@IF (ERROR) @GOTO RUNMIM
@TYPE SS:PLAN.PLAN.-2
@IF (ERROR) @GOTO RUNMIM
@COMBAT:ZONE
@IF (ERROR) @GOTO SCMPLS
@RESET ZONE
@CONNECT COMBAT:
@DELETE SS:PLAN.PLAN.-2
@BACKTO SSTOP
SCMPLS::@CONNECT COMBAT:
*<PROG ((OUTCHAN <AND <GASSIGNED? COMPCHAN!-CFC> ,COMPCHAN!-CFC>))
*  <COND (.OUTCHAN
*         <FR&>
=         <CLOSE .OUTCHAN>)>>
@IF (ERROR) @GOTO SMPLS1
=<QUIT>
@IF (ERROR) @GOTO SMPLS1
SMPLS1::
@CLOSE
@IF (ERROR) @GOTO SCNTCL
SCNTCL::
@RESET
@RENAME SS:PLAN.PLAN.-2 SS:PLAN.LOST
@IF (ERROR) @GOTO RNMLST
@BACKTO SSTOP
RNMLST::@DELETE SS:PLAN.PLAN.-2
@EXPUNGE SS:
@BACKTO SSTOP
RUNMIM::@CONNECT COMBAT:
@TYPE MIMC.PLAN.-2
@IF (ERROR) @GOTO ENDJOB
@RMIMC
@IF (ERROR) @GOTO MIMLST
@RESET RMIMC
@CONNECT COMBAT:
@DELETE MIMC.PLAN.-2
@BACKTO RUNMIM
MIMLST::@CONNECT COMBAT:
@CLOSE
@IF (ERROR) @GOTO CNTCLM
CNTCLM::
@RESET
@RENAME MIMC.PLAN.-2 MIMC.LOST
@IF (ERROR) @GOTO RNMLS1
@BACKTO RUNMIM
RNMLS1::@DELETE MIMC.PLAN.-2
@EXPUNGE
@BACKTO RUNMIM
ENDJOB::@SUBMIT COMBAT/TIME:10:00:00/AFTER:23:59:59/RESTARTABLE:YES
